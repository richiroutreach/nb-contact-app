<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="format-detection" content="telephone=no" />
		<meta name="msapplication-tap-highlight" content="no" />
		<title>NationBuilder Contacts</title>

		<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
		<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
		<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

		<link rel="stylesheet" href="css/foundation.min.css" />
		<link rel="stylesheet" href="css/app.css" />

		<script src="js/vendor/modernizr.js"></script>
	</head>

	<body>
		<div id="log-in-box" class="row">
			<div class="large-12 columns">
				<h1>Contacts</h1>

				<div>
					<input name="slug" id="slug" type="text" placeholder="Nation Slug"/>
				</div>

				<input class="button wide large" type="button" id="logIn" value="Log In" />
			</div>
		</div> <!-- .row -->

		<input class="button large" type="button" id="showToken" value="Show Token" />
		<input class="button large" type="button" id="showIndex" value="Index" />
		<input class="button large" type="button" id="matchEmail" value="Lookup Nicole" />
		<input class="button large" type="button" id="searchFunction" value="Search" />
		<input class="button large" type="button" id="testPush" value="Push" />

		<div id="output"></div>
	</body>

	<!-- jQuery -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

	<script>
		$('#logIn').click(function() {
			$.getJSON('http://contacts.richiroutreach.com/api-endpoint.php', { slug: $( '#slug' ).val(), endpoint: 'code' }, function( response ) {
				if( response.result.code == 2 ) {
					window.open( response.result.redirect_url );
				}
			});
		});

		$('#showToken').click(function() {
			$.getJSON('http://contacts.richiroutreach.com/api-endpoint.php', { slug: 'richir', endpoint: 'authorized' }, function( response ) {
				if( response.code == 5 ) {
					$( '#output' ).append( 'Authorized!' );
				} else {
					$( '#output' ).append( 'Not Authorized' );
				}
			});
		});

		$('#matchEmail').click(function() {
			$.getJSON('http://contacts.richiroutreach.com/api-endpoint.php', { slug: 'richir', endpoint: 'people', method: 'match', params: { email: 'nicole@richiroutreach.com' } }, function( response ) {
				$( '#output' ).html(response );
			});
		});

		$('#testPush').click(function() {
			$.getJSON( 'http://contacts.richiroutreach.com/api-endpoint.php', { slug: 'richir', endpoint: 'people', method: 'push', params: { person: { email: "nicole@richiroutreach.com", will_vote: "no" } } }, function(response) {
				$( '#output' ).html(response );
			});
		});

		$('#searchFunction').click(function() {
			$.getJSON( 'http://contacts.richiroutreach.com/api-endpoint.php', { slug: 'richir', endpoint: 'people', method: 'search', params: { custom_values: { will_vote: "yes" } } }, function(response) {
				$( '#output' ).html(response );
			});
		});

		$('#showIndex').click(function() {
			$.getJSON( 'http://contacts.richiroutreach.com/api-endpoint.php', { slug: 'richir', endpoint: 'people', method: 'index' }, function(response) {
				$( '#output' ).append( '<h1>' + response.result.code + '</h1>' );
			});
		});
	</script>

	<!-- Required for Phone Gap -->
	<script type="text/javascript" src="cordova.js"></script>

	<script type="text/javascript">
		// Initialize PhoneGap
		app.initialize();
	</script>

	<!-- Foundation JS -->
	<script src="js/foundation.min.js"></script>

	<script>
		// Initialize Foundation
		$(document).foundation();
	</script>
</html>
